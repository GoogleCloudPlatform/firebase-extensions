## See It In Action

You can test out this extension right away!

1. Go to your Cloud Firestore dashboard in the Firebase console.
2. If it doesn't exist, create the collection that you specified during installation: ${param:COLLECTION_NAME}.
3. Add a document to this collection. You may have specified some variables (${param:VARIABLE_FIELDS}) as part of your prompt that are meant to be substituted. Add those fields to the Firestore document, and the extension will substitute the values into the prompt before calling the PaLM API.
4. In a few seconds, you'll see a status field appear in the document. This field will update as the extension processes the message.
   When processing is finished, the ${param:RESPONSE_FIELD} field of the document should be populated with the response generated by the PaLM API.

Note: You can also use the Firebase Admin SDK to add a document:

```javascript
const ref = await admin
    .firestore()
    .collection("${param:COLLECTION_NAME}")
    .add({ ... }) // Include values for ${param:VARIABLE_FIELDS} fields

ref.onSnapshot(snap => {
    if (snap.get('${param:RESPONSE_FIELD}')) console.log(
        'RESPONSE:',
        snap.get('${param:RESPONSE_FIELD}')
    )
})
```

## About the models

The extension gives you a choice of Generative AI provider

- The Vertex AI PaLM API: For more details on the Vertex AI PaLM API, see the [Vertex AI documentation](https://cloud.google.com/vertex-ai/docs/generative-ai/learn/overview)

- The Generative Language for Developers PaLM API [PaLM API](https://developers.generativeai.google/guide/palm_api_overview).

- Gemini (TODO(?): documentation link pending)

## Handling errors

If the extension encounters an error, it will write an error message to the document in `status` field. You can use this field to monitor for errors in your documents.

### PaLM: Handling `ACCESS_TOKEN_SCOPE_INSUFFICIENT` error

If the error message is `The project or service account likely does not have access to the PaLM API`, please ensure that you have already signed up for the [waitlist](https://makersuite.google.com/waitlist) and have been approved before installing the extension.

Then, you need to add the PaLM API to your project. You can do this by going to the [PaLM API page](https://console.cloud.google.com/apis/library/language.googleapis.com) in the Google Cloud Console and clicking "Enable".

## Monitoring

As a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.
